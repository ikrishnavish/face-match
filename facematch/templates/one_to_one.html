<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>One to one</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <style>
        h3{
            text-align: center;
            text-transform: uppercase;
        }
        .main-container{
            border-radius: 20px;
            margin-top: 50px;
            box-shadow: 0px 0px 20px;
            padding: 50px;
        }
        .img-container{
            height:500px;
        }
        .img-container input{
            margin: 40px auto;
        }
        .img-container img{
            width: 300px;
            height: 400px;
            margin: 0px auto;
            display: block;
        }
        .second-row{
            text-align: center;
        }
        .second-row .alert{
            display: none;
        }
        .img-container svg{
            position: absolute;
            left: 46%;
            top: 160px;
            z-index: 2;
            display: none;
            width: 80px;
            height: 80px;
        }
    </style>
</head>
<body>
<h3>One to one image recognition system</h3>
<div class="container main-container">
    <div class="row">
        <form>
            <div class="col-sm-6 img-container">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid" class="lds-magnify"><g transform="translate(50,50)"><g ng-attr-transform="scale({{config.scale}})" transform="scale(0.8)"><g transform="translate(-50,-50)"><g transform="translate(-17.3371 -20)"><animateTransform attributeName="transform" type="translate" calcMode="linear" values="-20 -20;20 -20;0 20;-20 -20" keyTimes="0;0.33;0.66;1" dur="1.4s" begin="0s" repeatCount="indefinite"></animateTransform><path ng-attr-fill="{{config.glass}}" d="M44.19,26.158c-4.817,0-9.345,1.876-12.751,5.282c-3.406,3.406-5.282,7.934-5.282,12.751 c0,4.817,1.876,9.345,5.282,12.751c3.406,3.406,7.934,5.282,12.751,5.282s9.345-1.876,12.751-5.282 c3.406-3.406,5.282-7.934,5.282-12.751c0-4.817-1.876-9.345-5.282-12.751C53.536,28.033,49.007,26.158,44.19,26.158z" fill="transparent"></path><path ng-attr-fill="{{config.frame}}" d="M78.712,72.492L67.593,61.373l-3.475-3.475c1.621-2.352,2.779-4.926,3.475-7.596c1.044-4.008,1.044-8.23,0-12.238 c-1.048-4.022-3.146-7.827-6.297-10.979C56.572,22.362,50.381,20,44.19,20C38,20,31.809,22.362,27.085,27.085 c-9.447,9.447-9.447,24.763,0,34.21C31.809,66.019,38,68.381,44.19,68.381c4.798,0,9.593-1.425,13.708-4.262l9.695,9.695 l4.899,4.899C73.351,79.571,74.476,80,75.602,80s2.251-0.429,3.11-1.288C80.429,76.994,80.429,74.209,78.712,72.492z M56.942,56.942 c-3.406,3.406-7.934,5.282-12.751,5.282s-9.345-1.876-12.751-5.282c-3.406-3.406-5.282-7.934-5.282-12.751 c0-4.817,1.876-9.345,5.282-12.751c3.406-3.406,7.934-5.282,12.751-5.282c4.817,0,9.345,1.876,12.751,5.282 c3.406,3.406,5.282,7.934,5.282,12.751C62.223,49.007,60.347,53.536,56.942,56.942z" fill="#000000"></path></g></g></g></g></svg>
                <img id="frame1"/>
                <input type="file" name="img1" id="img1">
            </div>
            <div class="col-sm-6 img-container">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid" class="lds-magnify"><g transform="translate(50,50)"><g ng-attr-transform="scale({{config.scale}})" transform="scale(0.8)"><g transform="translate(-50,-50)"><g transform="translate(-17.3371 -20)"><animateTransform attributeName="transform" type="translate" calcMode="linear" values="-20 -20;20 -20;0 20;-20 -20" keyTimes="0;0.33;0.66;1" dur="1.4s" begin="0s" repeatCount="indefinite"></animateTransform><path ng-attr-fill="{{config.glass}}" d="M44.19,26.158c-4.817,0-9.345,1.876-12.751,5.282c-3.406,3.406-5.282,7.934-5.282,12.751 c0,4.817,1.876,9.345,5.282,12.751c3.406,3.406,7.934,5.282,12.751,5.282s9.345-1.876,12.751-5.282 c3.406-3.406,5.282-7.934,5.282-12.751c0-4.817-1.876-9.345-5.282-12.751C53.536,28.033,49.007,26.158,44.19,26.158z" fill="transparent"></path><path ng-attr-fill="{{config.frame}}" d="M78.712,72.492L67.593,61.373l-3.475-3.475c1.621-2.352,2.779-4.926,3.475-7.596c1.044-4.008,1.044-8.23,0-12.238 c-1.048-4.022-3.146-7.827-6.297-10.979C56.572,22.362,50.381,20,44.19,20C38,20,31.809,22.362,27.085,27.085 c-9.447,9.447-9.447,24.763,0,34.21C31.809,66.019,38,68.381,44.19,68.381c4.798,0,9.593-1.425,13.708-4.262l9.695,9.695 l4.899,4.899C73.351,79.571,74.476,80,75.602,80s2.251-0.429,3.11-1.288C80.429,76.994,80.429,74.209,78.712,72.492z M56.942,56.942 c-3.406,3.406-7.934,5.282-12.751,5.282s-9.345-1.876-12.751-5.282c-3.406-3.406-5.282-7.934-5.282-12.751 c0-4.817,1.876-9.345,5.282-12.751c3.406-3.406,7.934-5.282,12.751-5.282c4.817,0,9.345,1.876,12.751,5.282 c3.406,3.406,5.282,7.934,5.282,12.751C62.223,49.007,60.347,53.536,56.942,56.942z" fill="#000000"></path></g></g></g></g></svg>
                <img id="frame2"/>
                <input type="file" name="img2" id="img2">
            </div>
        </form>
    </div>
    <div class="row second-row">
        <div class="alert alert-success"></div>
        <button type="button" class="btn btn-default check-btn" onclick="submitImages()" >CHECK</button>
        <button type="button" class="btn btn-default" onclick="location.reload()" >REFRESH</button>
    </div>
</div>
</body>
<script>
function submitImages(){
    $(".check-btn").attr("disabled", "disabled");
    $(".img-container svg").show();
    $("#frame1, #frame2").css("opacity", 0.5);
    var form = document.forms[0];
    var data = new FormData(form);
    $.ajax({
        url: "/one_to_one/",
        data: data,
        type: 'POST',
        contentType: false,
        processData: false,
        success: function (data) {
            if(data.success == true){
                if(data.is_match == true){
                    $(".second-row .alert").html("Both are same persons<br><strong>Similarity : " + data.similarity + "%</strong>");
                    $(".second-row .alert").show();
                    $("#frame1, #frame2").css("opacity", 1);
                    $(".img-container svg").hide();
                }
                else{
                    $(".second-row .alert").html("Both are different persons");
                    $(".second-row .alert").show();
                    $("#frame1, #frame2").css("opacity", 1);
                    $(".img-container svg").hide();
                }
            }
            else{
                alert(data.message);
            }
        }
    });
}

function showImage(img, frame) {
    var src = document.getElementById(img);
    var target = document.getElementById(frame);
    var fr=new FileReader();
    fr.onload = function(e) { target.src = this.result; };
    src.addEventListener("change",function() {
        fr.readAsDataURL(src.files[0]);
    });
}

showImage("img1","frame1");
showImage("img2","frame2");

</script>
</html>